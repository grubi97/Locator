(this.webpackJsonpiot_projekt=this.webpackJsonpiot_projekt||[]).push([[0],{214:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a(0),c=a.n(s),r=a(20),i=a.n(r),o=(a(94),a(22)),l=a(6),d=a(217);var j=function(){return Object(n.jsxs)(d.a,{className:"mt-4",children:[Object(n.jsx)("h2",{children:"About the project"}),Object(n.jsx)("p",{children:" Project created by Luka \u0160imi\u0107, Predrag Duvnjak and Marko Grube\u0161a."})]})},b=a(7),u=a(37);var h=function(e){return Object(n.jsx)(u.Line,{data:{datasets:e.readings},height:400,width:1200,options:{responsive:!1,maintainAspectRatio:!1,elements:{point:{radius:0,hitRadius:0}},tooltips:{enabled:!1},title:{display:!0,text:"Temperatures graph",fontSize:"18"},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Time"},type:"time",ticks:{min:e.start,max:e.end,maxTicksLimit:10},time:{displayFormats:{hour:"D.M.YYYY h:mm a"}}}],yAxes:[{scaleLabel:{display:!0,labelString:"Temperature"}}]}}})};var m=function(e){return Object(n.jsx)(u.Line,{data:{datasets:e.readings},height:400,width:1200,options:{responsive:!1,maintainAspectRatio:!1,elements:{point:{radius:0,hitRadius:0}},tooltips:{enabled:!1},title:{display:!0,text:"Pressure graph",fontSize:"18"},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Time"},type:"time",ticks:{min:e.start,max:e.end,maxTicksLimit:10},time:{displayFormats:{hour:"D.M.YYYY h:mm a"}}}],yAxes:[{scaleLabel:{display:!0,labelString:"Pressure"}}]}}})},O=a(18),p=a.n(O);var x=function(){var e=Object(s.useState)(Date.now()-864e5),t=Object(b.a)(e,2),a=t[0],c=t[1],r=Object(s.useState)(Date.now()),i=Object(b.a)(r,2),o=i[0],l=i[1],d=Object(s.useState)({loaded:!1,formatedTemperatures:[]}),j=Object(b.a)(d,2),u=j[0],O=j[1];return Object(s.useEffect)((function(){u.loaded||p.a.get("/api/sensor").then((function(e){var t=e.data,a=[],n=[];t.forEach((function(e){var t=[],s=[];e.readings.map((function(e){t.push({x:e.date,y:e.temperature}),s.push({x:e.date,y:e.pressure})}));var c=256*Math.random(),r=256*Math.random(),i=256*Math.random();a.push({label:e.name,data:t,backgroundColor:"rgba(".concat(c,",").concat(r,",").concat(i,",0.4)")}),n.push({label:e.name,data:s,backgroundColor:"rgba(".concat(c,",").concat(r,",").concat(i,",0.4)")})})),O({loaded:!0,formatedTemperatures:a,formatedPressure:n})})).catch((function(e){console.log(e)}))})),u?Object(n.jsxs)("div",{className:"mt-4 ml-4",children:[Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{htmlFor:"startDate",children:"Start date"}),Object(n.jsx)("input",{id:"startDate",type:"datetime-local",value:a,onChange:function(e){c(e.target.value)}}),Object(n.jsx)("label",{htmlFor:"startDate",className:"ml-3",children:"End date"}),Object(n.jsx)("input",{id:"startDate",type:"datetime-local",onChange:function(e){l(e.target.value)}})]}),Object(n.jsxs)("div",{style:{overflowX:"scroll"},children:[Object(n.jsx)(h,{readings:u.formatedTemperatures,start:a,end:o}),Object(n.jsx)(m,{readings:u.formatedPressure,start:a,end:o})]})]}):Object(n.jsx)("div",{})},g=a(224),f=a(218);var v=function(){var e=Object(s.useState)(""),t=Object(b.a)(e,2),a=t[0],c=t[1],r=Object(s.useState)(""),i=Object(b.a)(r,2),o=i[0],j=i[1],u=Object(s.useState)(""),h=Object(b.a)(u,2),m=h[0],O=h[1],x=Object(s.useState)(""),v=Object(b.a)(x,2),y=v[0],L=v[1],S=Object(s.useState)(""),k=Object(b.a)(S,2),A=k[0],C=k[1],w=Object(l.f)(),D=function(e){"name"===e.target.name&&c(e.target.value),"password"===e.target.name&&j(e.target.value),"location"===e.target.name&&O(e.target.value),"latitude"===e.target.name&&L(e.target.value),"longitude"===e.target.name&&C(e.target.value)};return Object(n.jsxs)(d.a,{className:"mt-4",children:[Object(n.jsx)("h2",{children:"Add a new sensor"}),Object(n.jsxs)(g.a,{className:"mt-4",onSubmit:function(e){e.preventDefault(),p.a.post("/api/sensor",{latitude:y,longitude:A,password:o,name:a,location:m}),w.push("/")},children:[Object(n.jsx)(g.a.Label,{children:"Name"}),Object(n.jsx)(g.a.Control,{name:"name",type:"text",onChange:D,value:a,placeholder:"Sensors name"}),Object(n.jsx)(g.a.Label,{children:"Password"}),Object(n.jsx)(g.a.Control,{name:"password",type:"text",onChange:D,value:o,placeholder:"Password used to send sensor data"}),Object(n.jsx)(g.a.Label,{children:"Location"}),Object(n.jsx)(g.a.Control,{name:"location",type:"text",onChange:D,value:m,placeholder:"Sensors location"}),Object(n.jsx)(g.a.Label,{children:"Latitude"}),Object(n.jsx)(g.a.Control,{name:"latitude",type:"number",onChange:D,value:y,placeholder:"Location latitude"}),Object(n.jsx)(g.a.Label,{children:"Longitude"}),Object(n.jsx)(g.a.Control,{name:"longitude",type:"number",onChange:D,value:A,placeholder:"Location Longitude"}),Object(n.jsx)(f.a,{className:"mt-3",variant:"primary",type:"submit",children:"Create"})]})]})},y=a(219),L=a(226),S=a(220),k=a(221),A=(a(211),a(212),a(85)),C=a(14),w=a.n(C);var D=function(){var e=w.a.icon({iconUrl:A.a,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[0,-26]});w.a.Marker.prototype.options.icon=e;var t=Object(s.useState)({sensorArray:[],loaded:!1}),a=Object(b.a)(t,2),c=a[0],r=a[1];return Object(s.useEffect)((function(){c.loaded||p.a.get("/api/sensor").then((function(e){r({sensorArray:e.data,loaded:!0})})).catch((function(e){console.log(e)}))})),c.loaded?Object(n.jsxs)(d.a,{className:"mt-4",children:[Object(n.jsx)("h2",{children:"Map displaying sensors"}),Object(n.jsx)("p",{children:"This map shows all the sensors currently sending data to the database."}),Object(n.jsx)("div",{children:Object(n.jsxs)(y.a,{style:{height:"50vh",width:"50vw"},center:[45.509,16.776],zoom:6,scrollWheelZoom:!0,children:[Object(n.jsx)(L.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),c.sensorArray.map((function(e){return Object(n.jsx)(S.a,{position:[e.latitude,e.longitude],children:Object(n.jsx)(k.a,{children:e.name})})}))]})})]}):Object(n.jsx)("div",{})},M=a(222);var N=function(){var e=Object(s.useState)({sensorArray:[],loaded:!1}),t=Object(b.a)(e,2),a=t[0],c=t[1];return Object(s.useEffect)((function(){a.loaded||p.a.get("/api/sensor").then((function(e){c({sensorArray:e.data,loaded:!0})})).catch((function(e){console.log(e)}))})),Object(n.jsx)(d.a,{className:"mt-4",children:Object(n.jsxs)(M.a,{hover:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Location"}),Object(n.jsx)("th",{children:"Latitude"}),Object(n.jsx)("th",{children:"Longitude"})]})}),Object(n.jsx)("tbody",{children:a.sensorArray.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.location}),Object(n.jsx)("td",{children:e.latitude}),Object(n.jsx)("td",{children:e.longitude})]})}))})]})})},T=a(223),P=a(225);function F(){return Object(n.jsxs)(T.a,{bg:"primary",variant:"dark",children:[Object(n.jsx)(T.a.Brand,{children:"Measurements are fun"}),Object(n.jsxs)(P.a,{className:"mr-auto",children:[Object(n.jsx)(P.a.Link,{as:o.b,to:"/",children:"Home"}),Object(n.jsx)(P.a.Link,{as:o.b,to:"/map",children:"Map"}),Object(n.jsx)(P.a.Link,{as:o.b,to:"/details",children:"Details"}),Object(n.jsx)(P.a.Link,{as:o.b,to:"/add",children:"Add sensors"}),Object(n.jsx)(P.a.Link,{as:o.b,to:"/about",children:"About"})]})]})}var Y=function(){return Object(n.jsx)("div",{children:Object(n.jsxs)(o.a,{children:[Object(n.jsx)(F,{}),Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{path:"/about",children:Object(n.jsx)(j,{})}),Object(n.jsx)(l.a,{path:"/details",children:Object(n.jsx)(N,{})}),Object(n.jsx)(l.a,{path:"/add",children:Object(n.jsx)(v,{})}),Object(n.jsx)(l.a,{path:"/map",children:Object(n.jsx)(D,{})}),Object(n.jsx)(l.a,{path:"/",children:Object(n.jsx)(x,{})})]})]})})},E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,227)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};a(213);i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(Y,{})}),document.getElementById("root")),E()},94:function(e,t,a){}},[[214,1,2]]]);
//# sourceMappingURL=main.831af76d.chunk.js.map